<!DOCTYPE html>
<html>
<head>
    <title>Cake Cutter</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        video, canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <h1>This is the Cake Cutter Ver 1.0</h1>
    <input id="slices" type="number" placeholder="Enter number of slices">
    <button id="slice">Slice!</button>
    <video autoplay playsinline></video> <!-- playsinline ensures that video plays in inline mode on iOS devices -->
    <canvas></canvas>

    <script>
        // Access the user's camera
        const video = document.querySelector('video');
        navigator.mediaDevices.getUserMedia({ 
            video: { 
                facingMode: "environment" 
            } 
        }).then(stream => {
            video.srcObject = stream;
        }).catch(error => {
            console.error("Cannot access the camera: ", error);
        });

        // When the 'Slice!' button is clicked, draw slices on a canvas overlay
        document.querySelector('#slice').addEventListener('click', () => {
            const numberOfSlices = document.querySelector('#slices').value;
            const canvas = document.querySelector('canvas');
            const context = canvas.getContext('2d');

            // Make sure the canvas is the same size as the video
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;

            // Clear the canvas
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Calculate the center and radius of the circle
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 10;  // Subtract 10 to leave some margin

            // Calculate the angle between slices
            const sliceAngle = 2 * Math.PI / numberOfSlices;

            // Draw the slices
            for (let i = 0; i < numberOfSlices; i++) {
                context.beginPath();
                context.moveTo(centerX, centerY);
                context.arc(centerX, centerY, radius, i * sliceAngle, (i + 1) * sliceAngle);
                context.closePath();

                // Style the slice
                context.lineWidth = 2;
                context.strokeStyle = '#ff0000';  // Red color
                context.stroke();
            }
        });
    </script>
</body>
</html>
